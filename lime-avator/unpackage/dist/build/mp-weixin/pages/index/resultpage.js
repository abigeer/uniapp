(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/resultpage"],{"2e98":function(t,a,e){"use strict";var n=e("bdbf"),o=e.n(n);o.a},"3ead":function(t,a,e){"use strict";(function(t){e("be84"),e("921b");n(e("66fd"));var a=n(e("efa5"));function n(t){return t&&t.__esModule?t:{default:t}}t(a.default)}).call(this,e("543d")["createPage"])},"410a":function(t,a,e){"use strict";(function(t){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var e={data:function(){return{canvasWidth:.9*t.getSystemInfoSync().windowWidth,canvasImagePath:"",templateImagePath:""}},onLoad:function(){var a=this,e=t.createCanvasContext("myCanvas");t.getImageInfo({src:getApp().globalData.userInfo.avatarUrl,success:function(n){console.log("绘图："+n.path),e.drawImage(n.path,0,0,a.canvasWidth,a.canvasWidth),getApp().globalData.items.forEach(function(t,a){e.save(),e.beginPath(),e.translate(t.width/2+t.left,t.height/2+t.top),e.rotate(t.rotate*Math.PI/180),e.translate(-t.width*t.scale/2,-t.height*t.scale/2),e.scale(t.scale,t.scale),e.drawImage(t.url,0,0,150,150),e.restore()}),e.draw(!1,function(){t.canvasToTempFilePath({canvasId:"myCanvas",success:function(t){console.log(t.tempFilePath),a.canvasImagePath=t.tempFilePath}})})}}),this.saveTemplatePath2Storage(getApp().globalData.userInfo.avatarUrl)},onShareAppMessage:function(t){return"button"===t.from&&console.log(t.target,t),{title:"获取你的圣诞帽",path:"pages/index/resultpage"}},methods:{save2Album:function(){var a=this;t.getSetting({success:function(e){e.authSetting["scope.writePhotosAlbum"]?a.saveImage():t.authorize({scope:"scope.writePhotosAlbum",success:function(t){a.saveImage()}})}})},saveImage:function(){t.saveImageToPhotosAlbum({filePath:this.canvasImagePath,success:function(t){console.log("图片保存到相册成功！")}})},saveTemplatePath2Storage:function(a){t.getImageInfo({src:a,success:function(a){t.setStorage({key:"templateImagePath",data:a.path})}})}}};a.default=e}).call(this,e("543d")["default"])},bb56:function(t,a,e){"use strict";e.r(a);var n=e("410a"),o=e.n(n);for(var s in n)"default"!==s&&function(t){e.d(a,t,function(){return n[t]})}(s);a["default"]=o.a},bdbf:function(t,a,e){},cc71:function(t,a,e){"use strict";var n=function(){var t=this,a=t.$createElement;t._self._c},o=[];e.d(a,"a",function(){return n}),e.d(a,"b",function(){return o})},efa5:function(t,a,e){"use strict";e.r(a);var n=e("cc71"),o=e("bb56");for(var s in o)"default"!==s&&function(t){e.d(a,t,function(){return o[t]})}(s);e("2e98");var c=e("2877"),u=Object(c["a"])(o["default"],n["a"],n["b"],!1,null,null,null);a["default"]=u.exports}},[["3ead","common/runtime","common/vendor"]]]);